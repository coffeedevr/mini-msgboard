extends layout 

block content
  div#main-content
    div#main-header
      h2 View Thread
    div#thread-wrapper
      div#thread-navigation
        //- p#nav-link
        //-   a(href="/") Home
      div#thread-header
        div#thread-display
          if thread.flair == 'Discussion'
            img.thread-logo.f(src="/images/thread-discuss.png")
          if thread.flair == 'General'
            img.thread-logo(src="/images/thread-general.png")
          if thread.flair == 'Question'
            img.thread-logo(src="/images/thread-question.png")/
          
        div#thread-title-wrapper
          a.thread-title(target="_self" href="/view/thread/" + thread._id)
            p.thread-flair(class=thread.flair) #{thread.flair}
            p.display-thread-title-text #{thread.title}
          div.thread-details
            p.thread-user by #{thread.user} • #{thread.date_created_formatted}
          hr
          div#thread-msg-content
            p#thread-msg #{thread.message}
      hr#replies-hr
      div#thread-reply-content
          ul#replies-list
            each msg in messages
                li.replies(id='r' + msg._id)
                  img.reply-avatar(src="/images/user.png")
                  div.reply-msg-wrapper
                    p.reply-msg-user #{msg.user} • #{msg.date_created_formatted}
                    p.reply-msg-content #{msg.message}
            //- else 
            //-   li No replies yet
                
      div.thread-controls
        div#page-threads
         if prevpage >= 1
           a.page-controls(href="/view/thread/" + thread._id + '?page=' + prevpage) Prev
         if nextpage > 1 && nextpage != page
           a.page-controls(href="/view/thread/" + thread._id + '?page=' + nextpage) Next

      if user
        form#form-reply(method="POST" action="")
            label(for="user") Type User name:
            input.form-controls(type="text" for="user" id="user" name="user" placeholder="Enter your name here... (optional)")
            label(for="message") Enter your reply:
            textarea.form-controls(type="text" for="message" id="message" name="message" placeholder="Enter your message here...")
            input#date_created.form-controls(type="hidden" value=new Date() name="date_created")
            input.form-controls(type="hidden" value=thread._id name="thread_id")
            button#btn-form.form-submit(type="submit") Post A Reply
      else 
        p#reply-form-disabled You must <a href='/log-in'>login</a> in order to reply to this thread.

        form#form-reply(method="POST" action="")
            label(for="user") Type User name:
            input.form-controls(type="text" for="user" id="user" name="user" placeholder="Enter your name here... (optional)")
            label(for="message") Enter your reply:
            textarea.form-controls(type="text" for="message" id="message" name="message" placeholder="Enter your message here...")
            input#date_created.form-controls(type="hidden" value=new Date() name="date_created")
            input.form-controls(type="hidden" value=thread._id name="thread_id")
            button#btn-form.form-submit(type="submit") Post A Reply

      if errors 
         p We found errors in your submission:
           ul 
             for error in errors 
               li!= error.msg
  div#sidebar-content
    div#recent-content
      div#sidebar-header
        h2#sidebar-title-text Forum Rules
      ol.recent-replies-list
        li
          p Be respectful with each other. <br/>
            | Do not harrass, bully, threat other users. <br/>
            | Remember, behind every screen is a human being.
        li 2.


